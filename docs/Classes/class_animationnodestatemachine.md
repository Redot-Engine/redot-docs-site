<!-- github_url: hide -->

<!-- DO NOT EDIT THIS FILE!!! -->
<!-- Generated automatically from Redot engine sources. -->
<!-- Generator: https://github.com/Redot-Engine/redot-engine/tree/master/doc/tools/make_md.py. -->
<!-- XML source: https://github.com/Redot-Engine/redot-engine/tree/master/doc/classes/AnimationNodeStateMachine.xml. -->

<a id="class_AnimationNodeStateMachine"></a>

# AnimationNodeStateMachine

**Inherits:** [AnimationRootNode](class_animationrootnode.md) **<** [AnimationNode](class_animationnode.md) **<** [Resource](class_resource.md) **<** [RefCounted](class_refcounted.md) **<** [Object](class_object.md)

A state machine with multiple [AnimationRootNode](class_animationrootnode.md)\ s, used by [AnimationTree](class_animationtree.md).

<!-- classref-introduction-group -->

## Description

Contains multiple [AnimationRootNode](class_animationrootnode.md)\ s representing animation states, connected in a graph. State transitions can be configured to happen automatically or via code, using a shortest-path algorithm. Retrieve the [AnimationNodeStateMachinePlayback](class_animationnodestatemachineplayback.md) object from the [AnimationTree](class_animationtree.md) node to control it programmatically.




```gdscript
    var state_machine = $AnimationTree.get("parameters/playback")
    state_machine.travel("some_state")
```

```csharp
    var stateMachine = GetNode<AnimationTree>("AnimationTree").Get("parameters/playback") as AnimationNodeStateMachinePlayback;
    stateMachine.Travel("some_state");
```



<!-- classref-introduction-group -->

## Tutorials

- [Using AnimationTree](../tutorials/animation/animation_tree.md)

<!-- classref-reftable-group -->

## Properties

<table>
  <thead>
    <tr>
      <th>[bool](class_bool.md)</th>
      <th>[allow_transition_to_self](#class_AnimationNodeStateMachine_property_allow_transition_to_self)</th>
      <th>`false`</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>[bool](class_bool.md)</td>
      <td>[reset_ends](#class_AnimationNodeStateMachine_property_reset_ends)</td>
      <td>`false`</td>
    </tr>
    <tr>
      <td>[StateMachineType](class_animationnodestatemachine.md#enum_AnimationNodeStateMachine_StateMachineType)</td>
      <td>[state_machine_type](#class_AnimationNodeStateMachine_property_state_machine_type)</td>
      <td>`0`</td>
    </tr>
  </tbody>
</table>

<!-- classref-reftable-group -->

## Methods

<table>
  <thead>
    <tr>
      <th>`void`</th>
      <th>[add_node](#class_AnimationNodeStateMachine_method_add_node)\ (\ name\: [StringName](class_stringname.md), node\: [AnimationNode](class_animationnode.md), position\: [Vector2](class_vector2.md) = Vector2(0, 0)\ )</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>`void`</td>
      <td>[add_transition](#class_AnimationNodeStateMachine_method_add_transition)\ (\ from\: [StringName](class_stringname.md), to\: [StringName](class_stringname.md), transition\: [AnimationNodeStateMachineTransition](class_animationnodestatemachinetransition.md)\ )</td>
    </tr>
    <tr>
      <td>[Vector2](class_vector2.md)</td>
      <td>[get_graph_offset](#class_AnimationNodeStateMachine_method_get_graph_offset)\ (\ ) <span class="const">const</span></td>
    </tr>
    <tr>
      <td>[AnimationNode](class_animationnode.md)</td>
      <td>[get_node](#class_AnimationNodeStateMachine_method_get_node)\ (\ name\: [StringName](class_stringname.md)\ ) <span class="const">const</span></td>
    </tr>
    <tr>
      <td>[Array](class_array.md)\[[StringName](class_stringname.md)\]</td>
      <td>[get_node_list](#class_AnimationNodeStateMachine_method_get_node_list)\ (\ ) <span class="const">const</span></td>
    </tr>
    <tr>
      <td>[StringName](class_stringname.md)</td>
      <td>[get_node_name](#class_AnimationNodeStateMachine_method_get_node_name)\ (\ node\: [AnimationNode](class_animationnode.md)\ ) <span class="const">const</span></td>
    </tr>
    <tr>
      <td>[Vector2](class_vector2.md)</td>
      <td>[get_node_position](#class_AnimationNodeStateMachine_method_get_node_position)\ (\ name\: [StringName](class_stringname.md)\ ) <span class="const">const</span></td>
    </tr>
    <tr>
      <td>[AnimationNodeStateMachineTransition](class_animationnodestatemachinetransition.md)</td>
      <td>[get_transition](#class_AnimationNodeStateMachine_method_get_transition)\ (\ idx\: [int](class_int.md)\ ) <span class="const">const</span></td>
    </tr>
    <tr>
      <td>[int](class_int.md)</td>
      <td>[get_transition_count](#class_AnimationNodeStateMachine_method_get_transition_count)\ (\ ) <span class="const">const</span></td>
    </tr>
    <tr>
      <td>[StringName](class_stringname.md)</td>
      <td>[get_transition_from](#class_AnimationNodeStateMachine_method_get_transition_from)\ (\ idx\: [int](class_int.md)\ ) <span class="const">const</span></td>
    </tr>
    <tr>
      <td>[StringName](class_stringname.md)</td>
      <td>[get_transition_to](#class_AnimationNodeStateMachine_method_get_transition_to)\ (\ idx\: [int](class_int.md)\ ) <span class="const">const</span></td>
    </tr>
    <tr>
      <td>[bool](class_bool.md)</td>
      <td>[has_node](#class_AnimationNodeStateMachine_method_has_node)\ (\ name\: [StringName](class_stringname.md)\ ) <span class="const">const</span></td>
    </tr>
    <tr>
      <td>[bool](class_bool.md)</td>
      <td>[has_transition](#class_AnimationNodeStateMachine_method_has_transition)\ (\ from\: [StringName](class_stringname.md), to\: [StringName](class_stringname.md)\ ) <span class="const">const</span></td>
    </tr>
    <tr>
      <td>`void`</td>
      <td>[remove_node](#class_AnimationNodeStateMachine_method_remove_node)\ (\ name\: [StringName](class_stringname.md)\ )</td>
    </tr>
    <tr>
      <td>`void`</td>
      <td>[remove_transition](#class_AnimationNodeStateMachine_method_remove_transition)\ (\ from\: [StringName](class_stringname.md), to\: [StringName](class_stringname.md)\ )</td>
    </tr>
    <tr>
      <td>`void`</td>
      <td>[remove_transition_by_index](#class_AnimationNodeStateMachine_method_remove_transition_by_index)\ (\ idx\: [int](class_int.md)\ )</td>
    </tr>
    <tr>
      <td>`void`</td>
      <td>[rename_node](#class_AnimationNodeStateMachine_method_rename_node)\ (\ name\: [StringName](class_stringname.md), new_name\: [StringName](class_stringname.md)\ )</td>
    </tr>
    <tr>
      <td>`void`</td>
      <td>[replace_node](#class_AnimationNodeStateMachine_method_replace_node)\ (\ name\: [StringName](class_stringname.md), node\: [AnimationNode](class_animationnode.md)\ )</td>
    </tr>
    <tr>
      <td>`void`</td>
      <td>[set_graph_offset](#class_AnimationNodeStateMachine_method_set_graph_offset)\ (\ offset\: [Vector2](class_vector2.md)\ )</td>
    </tr>
    <tr>
      <td>`void`</td>
      <td>[set_node_position](#class_AnimationNodeStateMachine_method_set_node_position)\ (\ name\: [StringName](class_stringname.md), position\: [Vector2](class_vector2.md)\ )</td>
    </tr>
  </tbody>
</table>

<hr class="classref-section-separator">

<!-- classref-descriptions-group -->

## Enumerations

<a id="enum_AnimationNodeStateMachine_StateMachineType"></a>

<!-- classref-enumeration -->

enum **StateMachineType**: [ðŸ”—](#enum_AnimationNodeStateMachine_StateMachineType)

<a id="class_AnimationNodeStateMachine_constant_STATE_MACHINE_TYPE_ROOT"></a>

<!-- classref-enumeration-constant -->

[StateMachineType](class_animationnodestatemachine.md#enum_AnimationNodeStateMachine_StateMachineType) **STATE_MACHINE_TYPE_ROOT** = `0`

Seeking to the beginning is treated as playing from the start state. Transition to the end state is treated as exiting the state machine.<a id="class_AnimationNodeStateMachine_constant_STATE_MACHINE_TYPE_NESTED"></a>

<!-- classref-enumeration-constant -->

[StateMachineType](class_animationnodestatemachine.md#enum_AnimationNodeStateMachine_StateMachineType) **STATE_MACHINE_TYPE_NESTED** = `1`

Seeking to the beginning is treated as seeking to the beginning of the animation in the current state. Transition to the end state, or the absence of transitions in each state, is treated as exiting the state machine.<a id="class_AnimationNodeStateMachine_constant_STATE_MACHINE_TYPE_GROUPED"></a>

<!-- classref-enumeration-constant -->

[StateMachineType](class_animationnodestatemachine.md#enum_AnimationNodeStateMachine_StateMachineType) **STATE_MACHINE_TYPE_GROUPED** = `2`

This is a grouped state machine that can be controlled from a parent state machine. It does not work independently. There must be a state machine with [state_machine_type](class_animationnodestatemachine.md#class_AnimationNodeStateMachine_property_state_machine_type) of [STATE_MACHINE_TYPE_ROOT](class_animationnodestatemachine.md#class_AnimationNodeStateMachine_constant_STATE_MACHINE_TYPE_ROOT) or [STATE_MACHINE_TYPE_NESTED](class_animationnodestatemachine.md#class_AnimationNodeStateMachine_constant_STATE_MACHINE_TYPE_NESTED) in the parent or ancestor.<hr class="classref-section-separator">

<!-- classref-descriptions-group -->

## Property Descriptions

<a id="class_AnimationNodeStateMachine_property_allow_transition_to_self"></a>

<!-- classref-property -->

[bool](class_bool.md) **allow_transition_to_self** = `false` [ðŸ”—](#class_AnimationNodeStateMachine_property_allow_transition_to_self)

<!-- classref-property-setget -->

- `void` **set_allow_transition_to_self**\ (\ value\: [bool](class_bool.md)\ )
- [bool](class_bool.md) **is_allow_transition_to_self**\ (\ )

If ``true``, allows teleport to the self state with [AnimationNodeStateMachinePlayback.travel()](class_animationnodestatemachineplayback.md#class_AnimationNodeStateMachinePlayback_method_travel). When the reset option is enabled in [AnimationNodeStateMachinePlayback.travel()](class_animationnodestatemachineplayback.md#class_AnimationNodeStateMachinePlayback_method_travel), the animation is restarted. If ``false``, nothing happens on the teleportation to the self state.

<hr class="classref-item-separator">

<a id="class_AnimationNodeStateMachine_property_reset_ends"></a>

<!-- classref-property -->

[bool](class_bool.md) **reset_ends** = `false` [ðŸ”—](#class_AnimationNodeStateMachine_property_reset_ends)

<!-- classref-property-setget -->

- `void` **set_reset_ends**\ (\ value\: [bool](class_bool.md)\ )
- [bool](class_bool.md) **are_ends_reset**\ (\ )

If ``true``, treat the cross-fade to the start and end nodes as a blend with the RESET animation.

In most cases, when additional cross-fades are performed in the parent [AnimationNode](class_animationnode.md) of the state machine, setting this property to ``false`` and matching the cross-fade time of the parent [AnimationNode](class_animationnode.md) and the state machine's start node and end node gives good results.

<hr class="classref-item-separator">

<a id="class_AnimationNodeStateMachine_property_state_machine_type"></a>

<!-- classref-property -->

[StateMachineType](class_animationnodestatemachine.md#enum_AnimationNodeStateMachine_StateMachineType) **state_machine_type** = `0` [ðŸ”—](#class_AnimationNodeStateMachine_property_state_machine_type)

<!-- classref-property-setget -->

- `void` **set_state_machine_type**\ (\ value\: [StateMachineType](class_animationnodestatemachine.md#enum_AnimationNodeStateMachine_StateMachineType)\ )
- [StateMachineType](class_animationnodestatemachine.md#enum_AnimationNodeStateMachine_StateMachineType) **get_state_machine_type**\ (\ )

This property can define the process of transitions for different use cases. See also [StateMachineType](class_animationnodestatemachine.md#enum_AnimationNodeStateMachine_StateMachineType).

<hr class="classref-section-separator">

<!-- classref-descriptions-group -->

## Method Descriptions

<a id="class_AnimationNodeStateMachine_method_add_node"></a>

<!-- classref-method -->

`void` **add_node**\ (\ name\: [StringName](class_stringname.md), node\: [AnimationNode](class_animationnode.md), position\: [Vector2](class_vector2.md) = Vector2(0, 0)\ ) [ðŸ”—](#class_AnimationNodeStateMachine_method_add_node)

Adds a new animation node to the graph. The `position` is used for display in the editor.

<hr class="classref-item-separator">

<a id="class_AnimationNodeStateMachine_method_add_transition"></a>

<!-- classref-method -->

`void` **add_transition**\ (\ from\: [StringName](class_stringname.md), to\: [StringName](class_stringname.md), transition\: [AnimationNodeStateMachineTransition](class_animationnodestatemachinetransition.md)\ ) [ðŸ”—](#class_AnimationNodeStateMachine_method_add_transition)

Adds a transition between the given animation nodes.

<hr class="classref-item-separator">

<a id="class_AnimationNodeStateMachine_method_get_graph_offset"></a>

<!-- classref-method -->

[Vector2](class_vector2.md) **get_graph_offset**\ (\ ) <span class="const">const</span> [ðŸ”—](#class_AnimationNodeStateMachine_method_get_graph_offset)

Returns the draw offset of the graph. Used for display in the editor.

<hr class="classref-item-separator">

<a id="class_AnimationNodeStateMachine_method_get_node"></a>

<!-- classref-method -->

[AnimationNode](class_animationnode.md) **get_node**\ (\ name\: [StringName](class_stringname.md)\ ) <span class="const">const</span> [ðŸ”—](#class_AnimationNodeStateMachine_method_get_node)

Returns the animation node with the given name.

<hr class="classref-item-separator">

<a id="class_AnimationNodeStateMachine_method_get_node_list"></a>

<!-- classref-method -->

[Array](class_array.md)\[[StringName](class_stringname.md)\] **get_node_list**\ (\ ) <span class="const">const</span> [ðŸ”—](#class_AnimationNodeStateMachine_method_get_node_list)

Returns a list containing the names of all animation nodes in this state machine.

<hr class="classref-item-separator">

<a id="class_AnimationNodeStateMachine_method_get_node_name"></a>

<!-- classref-method -->

[StringName](class_stringname.md) **get_node_name**\ (\ node\: [AnimationNode](class_animationnode.md)\ ) <span class="const">const</span> [ðŸ”—](#class_AnimationNodeStateMachine_method_get_node_name)

Returns the given animation node's name.

<hr class="classref-item-separator">

<a id="class_AnimationNodeStateMachine_method_get_node_position"></a>

<!-- classref-method -->

[Vector2](class_vector2.md) **get_node_position**\ (\ name\: [StringName](class_stringname.md)\ ) <span class="const">const</span> [ðŸ”—](#class_AnimationNodeStateMachine_method_get_node_position)

Returns the given animation node's coordinates. Used for display in the editor.

<hr class="classref-item-separator">

<a id="class_AnimationNodeStateMachine_method_get_transition"></a>

<!-- classref-method -->

[AnimationNodeStateMachineTransition](class_animationnodestatemachinetransition.md) **get_transition**\ (\ idx\: [int](class_int.md)\ ) <span class="const">const</span> [ðŸ”—](#class_AnimationNodeStateMachine_method_get_transition)

Returns the given transition.

<hr class="classref-item-separator">

<a id="class_AnimationNodeStateMachine_method_get_transition_count"></a>

<!-- classref-method -->

[int](class_int.md) **get_transition_count**\ (\ ) <span class="const">const</span> [ðŸ”—](#class_AnimationNodeStateMachine_method_get_transition_count)

Returns the number of connections in the graph.

<hr class="classref-item-separator">

<a id="class_AnimationNodeStateMachine_method_get_transition_from"></a>

<!-- classref-method -->

[StringName](class_stringname.md) **get_transition_from**\ (\ idx\: [int](class_int.md)\ ) <span class="const">const</span> [ðŸ”—](#class_AnimationNodeStateMachine_method_get_transition_from)

Returns the given transition's start node.

<hr class="classref-item-separator">

<a id="class_AnimationNodeStateMachine_method_get_transition_to"></a>

<!-- classref-method -->

[StringName](class_stringname.md) **get_transition_to**\ (\ idx\: [int](class_int.md)\ ) <span class="const">const</span> [ðŸ”—](#class_AnimationNodeStateMachine_method_get_transition_to)

Returns the given transition's end node.

<hr class="classref-item-separator">

<a id="class_AnimationNodeStateMachine_method_has_node"></a>

<!-- classref-method -->

[bool](class_bool.md) **has_node**\ (\ name\: [StringName](class_stringname.md)\ ) <span class="const">const</span> [ðŸ”—](#class_AnimationNodeStateMachine_method_has_node)

Returns ``true`` if the graph contains the given animation node.

<hr class="classref-item-separator">

<a id="class_AnimationNodeStateMachine_method_has_transition"></a>

<!-- classref-method -->

[bool](class_bool.md) **has_transition**\ (\ from\: [StringName](class_stringname.md), to\: [StringName](class_stringname.md)\ ) <span class="const">const</span> [ðŸ”—](#class_AnimationNodeStateMachine_method_has_transition)

Returns ``true`` if there is a transition between the given animation nodes.

<hr class="classref-item-separator">

<a id="class_AnimationNodeStateMachine_method_remove_node"></a>

<!-- classref-method -->

`void` **remove_node**\ (\ name\: [StringName](class_stringname.md)\ ) [ðŸ”—](#class_AnimationNodeStateMachine_method_remove_node)

Deletes the given animation node from the graph.

<hr class="classref-item-separator">

<a id="class_AnimationNodeStateMachine_method_remove_transition"></a>

<!-- classref-method -->

`void` **remove_transition**\ (\ from\: [StringName](class_stringname.md), to\: [StringName](class_stringname.md)\ ) [ðŸ”—](#class_AnimationNodeStateMachine_method_remove_transition)

Deletes the transition between the two specified animation nodes.

<hr class="classref-item-separator">

<a id="class_AnimationNodeStateMachine_method_remove_transition_by_index"></a>

<!-- classref-method -->

`void` **remove_transition_by_index**\ (\ idx\: [int](class_int.md)\ ) [ðŸ”—](#class_AnimationNodeStateMachine_method_remove_transition_by_index)

Deletes the given transition by index.

<hr class="classref-item-separator">

<a id="class_AnimationNodeStateMachine_method_rename_node"></a>

<!-- classref-method -->

`void` **rename_node**\ (\ name\: [StringName](class_stringname.md), new_name\: [StringName](class_stringname.md)\ ) [ðŸ”—](#class_AnimationNodeStateMachine_method_rename_node)

Renames the given animation node.

<hr class="classref-item-separator">

<a id="class_AnimationNodeStateMachine_method_replace_node"></a>

<!-- classref-method -->

`void` **replace_node**\ (\ name\: [StringName](class_stringname.md), node\: [AnimationNode](class_animationnode.md)\ ) [ðŸ”—](#class_AnimationNodeStateMachine_method_replace_node)

Replaces the given animation node with a new animation node.

<hr class="classref-item-separator">

<a id="class_AnimationNodeStateMachine_method_set_graph_offset"></a>

<!-- classref-method -->

`void` **set_graph_offset**\ (\ offset\: [Vector2](class_vector2.md)\ ) [ðŸ”—](#class_AnimationNodeStateMachine_method_set_graph_offset)

Sets the draw offset of the graph. Used for display in the editor.

<hr class="classref-item-separator">

<a id="class_AnimationNodeStateMachine_method_set_node_position"></a>

<!-- classref-method -->

`void` **set_node_position**\ (\ name\: [StringName](class_stringname.md), position\: [Vector2](class_vector2.md)\ ) [ðŸ”—](#class_AnimationNodeStateMachine_method_set_node_position)

Sets the animation node's coordinates. Used for display in the editor.

