<!-- github_url: hide -->

<!-- keywords: network -->

<!-- DO NOT EDIT THIS FILE!!! -->
<!-- Generated automatically from Redot engine sources. -->
<!-- Generator: https://github.com/Redot-Engine/redot-engine/tree/master/doc/tools/make_md.py. -->
<!-- XML source: https://github.com/Redot-Engine/redot-engine/tree/master/doc/classes/MultiplayerAPIExtension.xml. -->

<a id="MultiplayerAPIExtension"></a>

# MultiplayerAPIExtension

**Inherits:** [MultiplayerAPI](MultiplayerAPI.md) **\<** [RefCounted](RefCounted.md) **\<** [Object](Object.md)

Base class used for extending the [MultiplayerAPI](MultiplayerAPI.md).

<!-- classref-introduction-group -->

## Description

This class can be used to extend or replace the default [MultiplayerAPI](MultiplayerAPI.md) implementation via script or extensions.

The following example extend the default implementation ([SceneMultiplayer](SceneMultiplayer.md)) by logging every RPC being made, and every object being configured for replication.




```gdscript
    extends MultiplayerAPIExtension
    class_name LogMultiplayer

    # We want to extend the default SceneMultiplayer.
    var base_multiplayer = SceneMultiplayer.new()

    func _init():
        # Just passthrough base signals (copied to var to avoid cyclic reference)
        var cts = connected_to_server
        var cf = connection_failed
        var sd = server_disconnected
        var pc = peer_connected
        var pd = peer_disconnected
        base_multiplayer.connected_to_server.connect(func(): cts.emit())
        base_multiplayer.connection_failed.connect(func(): cf.emit())
        base_multiplayer.server_disconnected.connect(func(): sd.emit())
        base_multiplayer.peer_connected.connect(func(id): pc.emit(id))
        base_multiplayer.peer_disconnected.connect(func(id): pd.emit(id))

    func _poll():
        return base_multiplayer.poll()

    # Log RPC being made and forward it to the default multiplayer.
    func _rpc(peer: int, object: Object, method: StringName, args: Array) -> Error:
        print("Got RPC for %d: %s::%s(%s)" % [peer, object, method, args])
        return base_multiplayer.rpc(peer, object, method, args)

    # Log configuration add. E.g. root path (nullptr, NodePath), replication (Node, Spawner|Synchronizer), custom.
    func _object_configuration_add(object, config: Variant) -> Error:
        if config is MultiplayerSynchronizer:
            print("Adding synchronization configuration for %s. Synchronizer: %s" % [object, config])
        elif config is MultiplayerSpawner:
            print("Adding node %s to the spawn list. Spawner: %s" % [object, config])
        return base_multiplayer.object_configuration_add(object, config)

    # Log configuration remove. E.g. root path (nullptr, NodePath), replication (Node, Spawner|Synchronizer), custom.
    func _object_configuration_remove(object, config: Variant) -> Error:
        if config is MultiplayerSynchronizer:
            print("Removing synchronization configuration for %s. Synchronizer: %s" % [object, config])
        elif config is MultiplayerSpawner:
            print("Removing node %s from the spawn list. Spawner: %s" % [object, config])
        return base_multiplayer.object_configuration_remove(object, config)

    # These can be optional, but in our case we want to extend SceneMultiplayer, so forward everything.
    func _set_multiplayer_peer(p_peer: MultiplayerPeer):
        base_multiplayer.multiplayer_peer = p_peer

    func _get_multiplayer_peer() -> MultiplayerPeer:
        return base_multiplayer.multiplayer_peer

    func _get_unique_id() -> int:
        return base_multiplayer.get_unique_id()

    func _get_remote_sender_id() -> int:
        return base_multiplayer.get_remote_sender_id()

    func _get_peer_ids() -> PackedInt32Array:
        return base_multiplayer.get_peers()
```




Then in your main scene or in an autoload call [SceneTree.set_multiplayer()](SceneTree.md#SceneTree_method_set_multiplayer) to start using your custom [MultiplayerAPI](MultiplayerAPI.md):




```gdscript
    # autoload.gd
    func _enter_tree():
        # Sets our custom multiplayer as the main one in SceneTree.
        get_tree().set_multiplayer(LogMultiplayer.new())
```




Native extensions can alternatively use the [MultiplayerAPI.set_default_interface()](MultiplayerAPI.md#MultiplayerAPI_method_set_default_interface) method during initialization to configure themselves as the default implementation.

<!-- classref-reftable-group -->

## Methods

<table>
  <thead>
    <tr>
      <th>[MultiplayerPeer](MultiplayerPeer.md)</th>
      <th>[_get_multiplayer_peer](#MultiplayerAPIExtension_private_method__get_multiplayer_peer)\ (\ ) <span class="virtual">virtual</span></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>[PackedInt32Array](PackedInt32Array.md)</td>
      <td>[_get_peer_ids](#MultiplayerAPIExtension_private_method__get_peer_ids)\ (\ ) <span class="virtual">virtual</span> <span class="const">const</span></td>
    </tr>
    <tr>
      <td>[int](int.md)</td>
      <td>[_get_remote_sender_id](#MultiplayerAPIExtension_private_method__get_remote_sender_id)\ (\ ) <span class="virtual">virtual</span> <span class="const">const</span></td>
    </tr>
    <tr>
      <td>[int](int.md)</td>
      <td>[_get_unique_id](#MultiplayerAPIExtension_private_method__get_unique_id)\ (\ ) <span class="virtual">virtual</span> <span class="const">const</span></td>
    </tr>
    <tr>
      <td>[Error](@GlobalScope.md#enum_@GlobalScope_Error)</td>
      <td>[_object_configuration_add](#MultiplayerAPIExtension_private_method__object_configuration_add)\ (\ object\: [Object](Object.md), configuration\: [Variant](Variant.md)\ ) <span class="virtual">virtual</span></td>
    </tr>
    <tr>
      <td>[Error](@GlobalScope.md#enum_@GlobalScope_Error)</td>
      <td>[_object_configuration_remove](#MultiplayerAPIExtension_private_method__object_configuration_remove)\ (\ object\: [Object](Object.md), configuration\: [Variant](Variant.md)\ ) <span class="virtual">virtual</span></td>
    </tr>
    <tr>
      <td>[Error](@GlobalScope.md#enum_@GlobalScope_Error)</td>
      <td>[_poll](#MultiplayerAPIExtension_private_method__poll)\ (\ ) <span class="virtual">virtual</span></td>
    </tr>
    <tr>
      <td>[Error](@GlobalScope.md#enum_@GlobalScope_Error)</td>
      <td>[_rpc](#MultiplayerAPIExtension_private_method__rpc)\ (\ peer\: [int](int.md), object\: [Object](Object.md), method\: [StringName](StringName.md), args\: [Array](Array.md)\ ) <span class="virtual">virtual</span></td>
    </tr>
    <tr>
      <td>`void`</td>
      <td>[_set_multiplayer_peer](#MultiplayerAPIExtension_private_method__set_multiplayer_peer)\ (\ multiplayer_peer\: [MultiplayerPeer](MultiplayerPeer.md)\ ) <span class="virtual">virtual</span></td>
    </tr>
  </tbody>
</table>

<hr class="classref-section-separator"/>

<!-- classref-descriptions-group -->

## Method Descriptions

<a id="MultiplayerAPIExtension_private_method__get_multiplayer_peer"></a>

<!-- classref-method -->

[MultiplayerPeer](MultiplayerPeer.md) **_get_multiplayer_peer**\ (\ ) <span class="virtual">virtual</span> [ðŸ”—](#MultiplayerAPIExtension_private_method__get_multiplayer_peer)

Called when the [MultiplayerAPI.multiplayer_peer](MultiplayerAPI.md#MultiplayerAPI_property_multiplayer_peer) is retrieved.

<hr class="classref-item-separator"/>

<a id="MultiplayerAPIExtension_private_method__get_peer_ids"></a>

<!-- classref-method -->

[PackedInt32Array](PackedInt32Array.md) **_get_peer_ids**\ (\ ) <span class="virtual">virtual</span> <span class="const">const</span> [ðŸ”—](#MultiplayerAPIExtension_private_method__get_peer_ids)

Callback for [MultiplayerAPI.get_peers()](MultiplayerAPI.md#MultiplayerAPI_method_get_peers).

<hr class="classref-item-separator"/>

<a id="MultiplayerAPIExtension_private_method__get_remote_sender_id"></a>

<!-- classref-method -->

[int](int.md) **_get_remote_sender_id**\ (\ ) <span class="virtual">virtual</span> <span class="const">const</span> [ðŸ”—](#MultiplayerAPIExtension_private_method__get_remote_sender_id)

Callback for [MultiplayerAPI.get_remote_sender_id()](MultiplayerAPI.md#MultiplayerAPI_method_get_remote_sender_id).

<hr class="classref-item-separator"/>

<a id="MultiplayerAPIExtension_private_method__get_unique_id"></a>

<!-- classref-method -->

[int](int.md) **_get_unique_id**\ (\ ) <span class="virtual">virtual</span> <span class="const">const</span> [ðŸ”—](#MultiplayerAPIExtension_private_method__get_unique_id)

Callback for [MultiplayerAPI.get_unique_id()](MultiplayerAPI.md#MultiplayerAPI_method_get_unique_id).

<hr class="classref-item-separator"/>

<a id="MultiplayerAPIExtension_private_method__object_configuration_add"></a>

<!-- classref-method -->

[Error](@GlobalScope.md#enum_@GlobalScope_Error) **_object_configuration_add**\ (\ object\: [Object](Object.md), configuration\: [Variant](Variant.md)\ ) <span class="virtual">virtual</span> [ðŸ”—](#MultiplayerAPIExtension_private_method__object_configuration_add)

Callback for [MultiplayerAPI.object_configuration_add()](MultiplayerAPI.md#MultiplayerAPI_method_object_configuration_add).

<hr class="classref-item-separator"/>

<a id="MultiplayerAPIExtension_private_method__object_configuration_remove"></a>

<!-- classref-method -->

[Error](@GlobalScope.md#enum_@GlobalScope_Error) **_object_configuration_remove**\ (\ object\: [Object](Object.md), configuration\: [Variant](Variant.md)\ ) <span class="virtual">virtual</span> [ðŸ”—](#MultiplayerAPIExtension_private_method__object_configuration_remove)

Callback for [MultiplayerAPI.object_configuration_remove()](MultiplayerAPI.md#MultiplayerAPI_method_object_configuration_remove).

<hr class="classref-item-separator"/>

<a id="MultiplayerAPIExtension_private_method__poll"></a>

<!-- classref-method -->

[Error](@GlobalScope.md#enum_@GlobalScope_Error) **_poll**\ (\ ) <span class="virtual">virtual</span> [ðŸ”—](#MultiplayerAPIExtension_private_method__poll)

Callback for [MultiplayerAPI.poll()](MultiplayerAPI.md#MultiplayerAPI_method_poll).

<hr class="classref-item-separator"/>

<a id="MultiplayerAPIExtension_private_method__rpc"></a>

<!-- classref-method -->

[Error](@GlobalScope.md#enum_@GlobalScope_Error) **_rpc**\ (\ peer\: [int](int.md), object\: [Object](Object.md), method\: [StringName](StringName.md), args\: [Array](Array.md)\ ) <span class="virtual">virtual</span> [ðŸ”—](#MultiplayerAPIExtension_private_method__rpc)

Callback for [MultiplayerAPI.rpc()](MultiplayerAPI.md#MultiplayerAPI_method_rpc).

<hr class="classref-item-separator"/>

<a id="MultiplayerAPIExtension_private_method__set_multiplayer_peer"></a>

<!-- classref-method -->

`void` **_set_multiplayer_peer**\ (\ multiplayer_peer\: [MultiplayerPeer](MultiplayerPeer.md)\ ) <span class="virtual">virtual</span> [ðŸ”—](#MultiplayerAPIExtension_private_method__set_multiplayer_peer)

Called when the [MultiplayerAPI.multiplayer_peer](MultiplayerAPI.md#MultiplayerAPI_property_multiplayer_peer) is set.

