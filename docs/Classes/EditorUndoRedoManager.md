<!-- github_url: hide -->

<!-- DO NOT EDIT THIS FILE!!! -->
<!-- Generated automatically from Redot engine sources. -->
<!-- Generator: https://github.com/Redot-Engine/redot-engine/tree/master/doc/tools/make_md.py. -->
<!-- XML source: https://github.com/Redot-Engine/redot-engine/tree/master/doc/classes/EditorUndoRedoManager.xml. -->

<a id="EditorUndoRedoManager"></a>

# EditorUndoRedoManager

**Inherits:** [Object](Object.md)

Manages undo history of scenes opened in the editor.

<!-- classref-introduction-group -->

## Description

**EditorUndoRedoManager** is a manager for [UndoRedo](UndoRedo.md) objects associated with edited scenes. Each scene has its own undo history and **EditorUndoRedoManager** ensures that each action performed in the editor gets associated with a proper scene. For actions not related to scenes ([ProjectSettings](ProjectSettings.md) edits, external resources, etc.), a separate global history is used.

The usage is mostly the same as [UndoRedo](UndoRedo.md). You create and commit actions and the manager automatically decides under-the-hood what scenes it belongs to. The scene is deduced based on the first operation in an action, using the object from the operation. The rules are as follows:

- If the object is a [Node](Node.md), use the currently edited scene;

- If the object is a built-in resource, use the scene from its path;

- If the object is external resource or anything else, use global history.

This guessing can sometimes yield false results, so you can provide a custom context object when creating an action.

\ **EditorUndoRedoManager** is intended to be used by Redot editor plugins. You can obtain it using [EditorPlugin.get_undo_redo()](EditorPlugin.md#EditorPlugin_method_get_undo_redo). For non-editor uses or plugins that don't need to integrate with the editor's undo history, use [UndoRedo](UndoRedo.md) instead.

The manager's API is mostly the same as in [UndoRedo](UndoRedo.md), so you can refer to its documentation for more examples. The main difference is that **EditorUndoRedoManager** uses object + method name for actions, instead of [Callable](Callable.md).

<!-- classref-reftable-group -->

## Methods

<table>
  <thead>
    <tr>
      <th>`void`</th>
      <th>[add_do_method](#EditorUndoRedoManager_method_add_do_method)\ (\ object\: [Object](Object.md), method\: [StringName](StringName.md), ...\ ) <span class="vararg">vararg</span></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>`void`</td>
      <td>[add_do_property](#EditorUndoRedoManager_method_add_do_property)\ (\ object\: [Object](Object.md), property\: [StringName](StringName.md), value\: [Variant](Variant.md)\ )</td>
    </tr>
    <tr>
      <td>`void`</td>
      <td>[add_do_reference](#EditorUndoRedoManager_method_add_do_reference)\ (\ object\: [Object](Object.md)\ )</td>
    </tr>
    <tr>
      <td>`void`</td>
      <td>[add_undo_method](#EditorUndoRedoManager_method_add_undo_method)\ (\ object\: [Object](Object.md), method\: [StringName](StringName.md), ...\ ) <span class="vararg">vararg</span></td>
    </tr>
    <tr>
      <td>`void`</td>
      <td>[add_undo_property](#EditorUndoRedoManager_method_add_undo_property)\ (\ object\: [Object](Object.md), property\: [StringName](StringName.md), value\: [Variant](Variant.md)\ )</td>
    </tr>
    <tr>
      <td>`void`</td>
      <td>[add_undo_reference](#EditorUndoRedoManager_method_add_undo_reference)\ (\ object\: [Object](Object.md)\ )</td>
    </tr>
    <tr>
      <td>`void`</td>
      <td>[clear_history](#EditorUndoRedoManager_method_clear_history)\ (\ id\: [int](int.md) = -99, increase_version\: [bool](bool.md) = true\ )</td>
    </tr>
    <tr>
      <td>`void`</td>
      <td>[commit_action](#EditorUndoRedoManager_method_commit_action)\ (\ execute\: [bool](bool.md) = true\ )</td>
    </tr>
    <tr>
      <td>`void`</td>
      <td>[create_action](#EditorUndoRedoManager_method_create_action)\ (\ name\: [String](String.md), merge_mode\: [MergeMode](UndoRedo.md#enum_UndoRedo_MergeMode) = 0, custom_context\: [Object](Object.md) = null, backward_undo_ops\: [bool](bool.md) = false, mark_unsaved\: [bool](bool.md) = true\ )</td>
    </tr>
    <tr>
      <td>`void`</td>
      <td>[force_fixed_history](#EditorUndoRedoManager_method_force_fixed_history)\ (\ )</td>
    </tr>
    <tr>
      <td>[UndoRedo](UndoRedo.md)</td>
      <td>[get_history_undo_redo](#EditorUndoRedoManager_method_get_history_undo_redo)\ (\ id\: [int](int.md)\ ) <span class="const">const</span></td>
    </tr>
    <tr>
      <td>[int](int.md)</td>
      <td>[get_object_history_id](#EditorUndoRedoManager_method_get_object_history_id)\ (\ object\: [Object](Object.md)\ ) <span class="const">const</span></td>
    </tr>
    <tr>
      <td>[bool](bool.md)</td>
      <td>[is_committing_action](#EditorUndoRedoManager_method_is_committing_action)\ (\ ) <span class="const">const</span></td>
    </tr>
  </tbody>
</table>

<hr class="classref-section-separator"/>

<!-- classref-descriptions-group -->

## Signals

<a id="EditorUndoRedoManager_signal_history_changed"></a>

<!-- classref-signal -->

**history_changed**\ (\ ) [ðŸ”—](#EditorUndoRedoManager_signal_history_changed)

Emitted when the list of actions in any history has changed, either when an action is committed or a history is cleared.

<hr class="classref-item-separator"/>

<a id="EditorUndoRedoManager_signal_version_changed"></a>

<!-- classref-signal -->

**version_changed**\ (\ ) [ðŸ”—](#EditorUndoRedoManager_signal_version_changed)

Emitted when the version of any history has changed as a result of undo or redo call.

<hr class="classref-section-separator"/>

<!-- classref-descriptions-group -->

## Enumerations

<a id="enum_EditorUndoRedoManager_SpecialHistory"></a>

<!-- classref-enumeration -->

enum **SpecialHistory**: [ðŸ”—](#enum_EditorUndoRedoManager_SpecialHistory)

<a id="EditorUndoRedoManager_constant_GLOBAL_HISTORY"></a>

<!-- classref-enumeration-constant -->

[SpecialHistory](EditorUndoRedoManager.md#enum_EditorUndoRedoManager_SpecialHistory) **GLOBAL_HISTORY** = `0`

Global history not associated with any scene, but with external resources etc.<a id="EditorUndoRedoManager_constant_REMOTE_HISTORY"></a>

<!-- classref-enumeration-constant -->

[SpecialHistory](EditorUndoRedoManager.md#enum_EditorUndoRedoManager_SpecialHistory) **REMOTE_HISTORY** = `-9`

History associated with remote inspector. Used when live editing a running project.<a id="EditorUndoRedoManager_constant_INVALID_HISTORY"></a>

<!-- classref-enumeration-constant -->

[SpecialHistory](EditorUndoRedoManager.md#enum_EditorUndoRedoManager_SpecialHistory) **INVALID_HISTORY** = `-99`

Invalid "null" history. It's a special value, not associated with any object.<hr class="classref-section-separator"/>

<!-- classref-descriptions-group -->

## Method Descriptions

<a id="EditorUndoRedoManager_method_add_do_method"></a>

<!-- classref-method -->

`void` **add_do_method**\ (\ object\: [Object](Object.md), method\: [StringName](StringName.md), ...\ ) <span class="vararg">vararg</span> [ðŸ”—](#EditorUndoRedoManager_method_add_do_method)

Register a method that will be called when the action is committed (i.e. the "do" action).

If this is the first operation, the `object` will be used to deduce target undo history.

<hr class="classref-item-separator"/>

<a id="EditorUndoRedoManager_method_add_do_property"></a>

<!-- classref-method -->

`void` **add_do_property**\ (\ object\: [Object](Object.md), property\: [StringName](StringName.md), value\: [Variant](Variant.md)\ ) [ðŸ”—](#EditorUndoRedoManager_method_add_do_property)

Register a property value change for "do".

If this is the first operation, the `object` will be used to deduce target undo history.

<hr class="classref-item-separator"/>

<a id="EditorUndoRedoManager_method_add_do_reference"></a>

<!-- classref-method -->

`void` **add_do_reference**\ (\ object\: [Object](Object.md)\ ) [ðŸ”—](#EditorUndoRedoManager_method_add_do_reference)

Register a reference for "do" that will be erased if the "do" history is lost. This is useful mostly for new nodes created for the "do" call. Do not use for resources.

<hr class="classref-item-separator"/>

<a id="EditorUndoRedoManager_method_add_undo_method"></a>

<!-- classref-method -->

`void` **add_undo_method**\ (\ object\: [Object](Object.md), method\: [StringName](StringName.md), ...\ ) <span class="vararg">vararg</span> [ðŸ”—](#EditorUndoRedoManager_method_add_undo_method)

Register a method that will be called when the action is undone (i.e. the "undo" action).

If this is the first operation, the `object` will be used to deduce target undo history.

<hr class="classref-item-separator"/>

<a id="EditorUndoRedoManager_method_add_undo_property"></a>

<!-- classref-method -->

`void` **add_undo_property**\ (\ object\: [Object](Object.md), property\: [StringName](StringName.md), value\: [Variant](Variant.md)\ ) [ðŸ”—](#EditorUndoRedoManager_method_add_undo_property)

Register a property value change for "undo".

If this is the first operation, the `object` will be used to deduce target undo history.

<hr class="classref-item-separator"/>

<a id="EditorUndoRedoManager_method_add_undo_reference"></a>

<!-- classref-method -->

`void` **add_undo_reference**\ (\ object\: [Object](Object.md)\ ) [ðŸ”—](#EditorUndoRedoManager_method_add_undo_reference)

Register a reference for "undo" that will be erased if the "undo" history is lost. This is useful mostly for nodes removed with the "do" call (not the "undo" call!).

<hr class="classref-item-separator"/>

<a id="EditorUndoRedoManager_method_clear_history"></a>

<!-- classref-method -->

`void` **clear_history**\ (\ id\: [int](int.md) = -99, increase_version\: [bool](bool.md) = true\ ) [ðŸ”—](#EditorUndoRedoManager_method_clear_history)

Clears the given undo history. You can clear history for a specific scene, global history, or for all scenes at once if `id` is [INVALID_HISTORY](EditorUndoRedoManager.md#EditorUndoRedoManager_constant_INVALID_HISTORY).

If `increase_version` is ``true``, the undo history version will be increased, marking it as unsaved. Useful for operations that modify the scene, but don't support undo.

```
    var scene_root = EditorInterface.get_edited_scene_root()
    var undo_redo = EditorInterface.get_editor_undo_redo()
    undo_redo.clear_history(undo_redo.get_object_history_id(scene_root))
```


\ **Note:** If you want to mark an edited scene as unsaved without clearing its history, use [EditorInterface.mark_scene_as_unsaved()](EditorInterface.md#EditorInterface_method_mark_scene_as_unsaved) instead.

<hr class="classref-item-separator"/>

<a id="EditorUndoRedoManager_method_commit_action"></a>

<!-- classref-method -->

`void` **commit_action**\ (\ execute\: [bool](bool.md) = true\ ) [ðŸ”—](#EditorUndoRedoManager_method_commit_action)

Commits the action. If `execute` is ``true`` (default), all "do" methods/properties are called/set when this function is called.

<hr class="classref-item-separator"/>

<a id="EditorUndoRedoManager_method_create_action"></a>

<!-- classref-method -->

`void` **create_action**\ (\ name\: [String](String.md), merge_mode\: [MergeMode](UndoRedo.md#enum_UndoRedo_MergeMode) = 0, custom_context\: [Object](Object.md) = null, backward_undo_ops\: [bool](bool.md) = false, mark_unsaved\: [bool](bool.md) = true\ ) [ðŸ”—](#EditorUndoRedoManager_method_create_action)

Create a new action. After this is called, do all your calls to [add_do_method()](EditorUndoRedoManager.md#EditorUndoRedoManager_method_add_do_method), [add_undo_method()](EditorUndoRedoManager.md#EditorUndoRedoManager_method_add_undo_method), [add_do_property()](EditorUndoRedoManager.md#EditorUndoRedoManager_method_add_do_property), and [add_undo_property()](EditorUndoRedoManager.md#EditorUndoRedoManager_method_add_undo_property), then commit the action with [commit_action()](EditorUndoRedoManager.md#EditorUndoRedoManager_method_commit_action).

The way actions are merged is dictated by the `merge_mode` argument.

If `custom_context` object is provided, it will be used for deducing target history (instead of using the first operation).

The way undo operation are ordered in actions is dictated by `backward_undo_ops`. When `backward_undo_ops` is ``false`` undo option are ordered in the same order they were added. Which means the first operation to be added will be the first to be undone.

If `mark_unsaved` is ``false``, the action will not mark the history as unsaved. This is useful for example for actions that change a selection, or a setting that will be saved automatically. Otherwise, this should be left to ``true`` if the action requires saving by the user or if it can cause data loss when left unsaved.

<hr class="classref-item-separator"/>

<a id="EditorUndoRedoManager_method_force_fixed_history"></a>

<!-- classref-method -->

`void` **force_fixed_history**\ (\ ) [ðŸ”—](#EditorUndoRedoManager_method_force_fixed_history)

Forces the next operation (e.g. [add_do_method()](EditorUndoRedoManager.md#EditorUndoRedoManager_method_add_do_method)) to use the action's history rather than guessing it from the object. This is sometimes needed when a history can't be correctly determined, like for a nested resource that doesn't have a path yet.

This method should only be used when absolutely necessary, otherwise it might cause invalid history state. For most of complex cases, the ``custom_context`` parameter of [create_action()](EditorUndoRedoManager.md#EditorUndoRedoManager_method_create_action) is sufficient.

<hr class="classref-item-separator"/>

<a id="EditorUndoRedoManager_method_get_history_undo_redo"></a>

<!-- classref-method -->

[UndoRedo](UndoRedo.md) **get_history_undo_redo**\ (\ id\: [int](int.md)\ ) <span class="const">const</span> [ðŸ”—](#EditorUndoRedoManager_method_get_history_undo_redo)

Returns the [UndoRedo](UndoRedo.md) object associated with the given history `id`.

\ `id` above ``0`` are mapped to the opened scene tabs (but it doesn't match their order). `id` of ``0`` or lower have special meaning (see [SpecialHistory](EditorUndoRedoManager.md#enum_EditorUndoRedoManager_SpecialHistory)).

Best used with [get_object_history_id()](EditorUndoRedoManager.md#EditorUndoRedoManager_method_get_object_history_id). This method is only provided in case you need some more advanced methods of [UndoRedo](UndoRedo.md) (but keep in mind that directly operating on the [UndoRedo](UndoRedo.md) object might affect editor's stability).

<hr class="classref-item-separator"/>

<a id="EditorUndoRedoManager_method_get_object_history_id"></a>

<!-- classref-method -->

[int](int.md) **get_object_history_id**\ (\ object\: [Object](Object.md)\ ) <span class="const">const</span> [ðŸ”—](#EditorUndoRedoManager_method_get_object_history_id)

Returns the history ID deduced from the given `object`. It can be used with [get_history_undo_redo()](EditorUndoRedoManager.md#EditorUndoRedoManager_method_get_history_undo_redo).

<hr class="classref-item-separator"/>

<a id="EditorUndoRedoManager_method_is_committing_action"></a>

<!-- classref-method -->

[bool](bool.md) **is_committing_action**\ (\ ) <span class="const">const</span> [ðŸ”—](#EditorUndoRedoManager_method_is_committing_action)

Returns ``true`` if the **EditorUndoRedoManager** is currently committing the action, i.e. running its "do" method or property change (see [commit_action()](EditorUndoRedoManager.md#EditorUndoRedoManager_method_commit_action)).

